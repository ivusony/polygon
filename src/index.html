<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    <style>
        /* Set the size of the div element that contains the map */

        #map {
            height: 400px;
            /* The height is 400 pixels */
            width: 80%;
            /* The width is the width of the web page */
            margin: auto;
        }
    </style>
</head>

<body>
    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="map"></div>

    <button class="new_poly">Add new poly</button>
    <input class="poly_name" type="text">

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=API_KEY&callback=initMap"></script>

    

    <script src="./GM_POLY_DRAW.js"></script>

    <script src="./lib/google_map_draw_polygons.js"></script>
    <script src="./lib/google_map_add_poly_path.js"></script>
    
    <script>

        function initMap(){

            var map = new google.maps.Map(
                document.getElementById('map'),
                {
                    zoom: 10,
                    center: { lat: 45.53, lng: 20.01 }
                }
            );
        
            var DRAW = new GM_POLY_DRAW(map);


            // DRAWING TEST POLYGONs
            var polygon_paths = [
                [
                    { 
                        lat: 45.52678895484113, 
                        lng: 19.990212167006586 
                    },
                    { 
                        lat: 45.520414718863094, 
                        lng: 19.97939750025854 
                    },
                    {
                        lat: 45.5117542224206, 
                        lng: 19.990555489760492 
                    },
                    { 
                        lat: 45.519211951839594, 
                        lng: 20.0073783047019 
                    },
                    { 
                        lat: 45.52678895484113, 
                        lng: 19.990212167006586
                    }
                ],
                [
                    {
                        lat: 45.55157761097022,
                        lng: 19.841771829631174
                    },
                    {
                        lat: 45.609248208368896,
                        lng: 20.2276666050218
                    },
                    {
                        lat: 45.426421430606744,
                        lng: 20.2056939487718
                    },
                    {
                        lat: 45.41678251316127,
                        lng: 19.8870904331468
                    },
                    {
                        lat: 45.55157761097022,
                        lng: 19.841771829631174
                    }
                ],
                [
                    {
                        lat: 45.643822133956554,
                        lng: 19.970861185099924
                    },
                    {
                        lat: 45.609248208368896,
                        lng: 19.817052591349924
                    },
                    {
                        lat: 45.545807293223206,
                        lng: 19.69757627299055
                    },
                    {
                        lat: 45.463997485009095,
                        lng: 19.668737161662424
                    },
                    {
                        lat: 45.38206878466125,
                        lng: 19.7113091831468
                    },
                    {
                        lat: 45.36952803025814,
                        lng: 19.869237649943674
                    },
                    {
                        lat: 45.35312438579311,
                        lng: 20.130162942912424
                    },
                    {
                        lat: 45.380139618850414,
                        lng: 20.308690774943674
                    },
                    {
                        lat: 45.47940606167565,
                        lng: 20.3649957065843
                    },
                    {
                        lat: 45.60156221789062,
                        lng: 20.347142923381174
                    },
                    {
                        lat: 45.658221642722424,
                        lng: 20.20294736674055
                    },
                    {
                        lat: 45.65918147834512,
                        lng: 20.0463921909593
                    },
                    {
                        lat: 45.643822133956554,
                        lng: 19.970861185099924
                    }
                ]
            ];


            
            DRAW.polygons(polygon_paths);
            // *******************************

            var Init_Drawing_button = document.querySelector('.new_poly');

            Init_Drawing_button.addEventListener('click', function () {

                DRAW.add_new_polygon({
                    map: map
                }).then(function (poly) {
                    // do whatever you want with new poly path
                    DRAW.one_polygon(poly);

                    // send to DB
                })

                this.innerText = "Save new polygon"
            })
        }
        


       
      
    </script>
    


</body>

</html>